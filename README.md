# IaC ν…ν”λ¦Ών™” ν”„λ΅μ νΈ  

## λ©ν‘
ν…λΌνΌμ IaC ν…ν”λ¦ΏμΌλ΅ κµ¬μ„±ν•μ—¬ λ¨λ“μ„ ν•­μƒ μ μν•κ³ κ°λ°ν•κ³  κ°λ°ν‘μ¤€, λ¨λ²”μ‚¬λ΅€, μ‹¤λ¬΄ ν‘μ¤€μ„ λ”°λ¦„.
AWS μΈν”„λΌλ¥Ό μ¬μ‚¬μ© κ°€λ¥ν• IaC ν…ν”λ¦ΏμΌλ΅ κµ¬μ„±ν•μ—¬, λ‹¤μ–‘ν• μ†”λ£¨μ…μ„ λΉ λ¥΄κ² λ°°ν¬ν•  μ μλ„λ΅ ν•¨
AWS ECS ν•μ„ΈνΈ λ² ν¬ν•΄λ³΄κΈ°

## λ„¤μ΄λ° κ·μΉ™
**ν•μ‹**: `{aws-service}-{environment}-{solution}[-{component}]`

### μμ‹
- `ecs-dev-myapp`
- `ecs-dev-mys1-api`
- `ecs-prod-payment-web`
- `rds-dev-myapp`

## λ””λ ‰ν† λ¦¬ κµ¬μ΅°

```
infra/          
β”β”€β”€ aws-def/                    # μ‹¤μ  AWS describeλ΅ μƒμ„±λ μ°Έκ³  νμΌ          
β”‚   β”β”€β”€ cluster-dev.json            
β”‚   β”β”€β”€ taskdef-dev.json            
β”‚   β”β”€β”€ service-dev.json            
β”‚   β””β”€β”€ autoscal-dev.json           
β”‚           
β”β”€β”€ modules/                     # μ¬μ‚¬μ© κ°€λ¥ν• κµ¬μ„± λ‹¨μ„ (λ¨λ“)           
β”‚   β”β”€β”€ ec2/            
β”‚   β”‚   β”β”€β”€ main.tf         
β”‚   β”‚   β”β”€β”€ variables.tf            
β”‚   β”‚   β””β”€β”€ outputs.tf          
β”‚   β”β”€β”€ ecs/            
β”‚   β”‚   β”β”€β”€ ecs-cluster/            
β”‚   β”‚   β”β”€β”€ ecs-task/           
β”‚   β”‚   β”β”€β”€ ecs-autoscaling/            
β”‚   β”‚   β””β”€β”€ ecs-service/            
β”‚   β”β”€β”€ s3/         
β”‚   β”β”€β”€ elb/            
β”‚   β””β”€β”€ route53/            
β”‚           
β”β”€β”€ solutions/                   # νΉμ • μ„λΉ„μ¤/ν”„λ΅μ νΈ(μ†”λ£¨μ…) λ‹¨μ„                          
β”‚   β”β”€β”€ solution1/                  
β”‚   β”β”€β”€ solution2/                  
β”‚   β””β”€β”€ data-platform/           # μ: λ°μ΄ν„° μμ§‘ νμ΄ν”„λΌμΈ
β”‚           
β”β”€β”€ envs/                        # ν™κ²½λ³„ λ°°ν¬ λ‹¨μ„         
β”‚   β”β”€β”€ prod/           
β”‚   β”‚   β”β”€β”€ main.tf         
β”‚   β”‚   β”β”€β”€ variables.tf            
β”‚   β”‚   β”β”€β”€ terraform.tfvars            
β”‚   β”‚   β””β”€β”€ backend.hcl         
β”‚   β”β”€β”€ stage/          
β”‚   β””β”€β”€ dev/            
β”‚           
β”β”€β”€ terraform.tf         # Terraform & Provider λ²„μ „ κ³ μ •        
β”β”€β”€ providers.tf        # Provider κ³µν†µ μ„¤μ • (AWS, tags λ“±)     
β”β”€β”€ variables.tf        # λ¨λ“  μ†”λ£¨μ…/ν™κ²½μ΄ κ³µν†µμΌλ΅ μ“°λ” λ³€μ     
β”β”€β”€ outputs.tf          # κ³µν†µ μ¶λ ¥ μ •μ (μ„ νƒ)     
β””β”€β”€ backend-common.hcl  # κ³µν†µ λ°±μ—”λ“ μ„¤μ • (μ„ νƒ)       

```

## Terraform λ¨λ²”μ‚¬λ΅€
- **λ¨λ“μ—μ„ μ΄λ¦„κ·μΉ™μ€**: `terraform-<PROVIDER>-<NAME>`
- **λ¨λ“μ„ μ—Όλ‘μ— λ‘κ³  κµ¬μ„± μ‘μ„±μ„ μ‹μ‘ν•μ„Έμ”**



### Terraform
- **μ¥μ **: λ©€ν‹° ν΄λΌμ°λ“ μ§€μ›, HCL λ¬Έλ²•, κ°•λ ¥ν• λ¨λ“ μ‹μ¤ν…, Plan κΈ°λ¥
- **λ‹¨μ **: State κ΄€λ¦¬ ν•„μ” (S3 + DynamoDB)
- **μƒνƒ**: π”„ κµ¬ν„ μμ •

## μ‚¬μ© μ‹λ‚λ¦¬μ¤

### μƒλ΅μ΄ μ†”λ£¨μ… λ°°ν¬
1. Values/ν™κ²½ νμΌ λ³µμ‚¬
2. μ„¤μ • μμ • (μ΄λ―Έμ§€, ν¬νΈ, ν™κ²½λ³€μ λ“±)
3. λ°°ν¬ μ‹¤ν–‰



### Terraform λ°©μ‹ (μμ •)
```bash
terraform init
terraform plan
terraform apply
```

## λ‹¤μ λ‹¨κ³„
- [ ] Terraform λ¨λ“ κµ¬ν„
- [ ] Terraform ν™κ²½λ³„ μ„¤μ • μƒμ„±
- [ ] λ°°ν¬ μ¤ν¬λ¦½νΈ μ‘μ„±
- [ ] CI/CD νμ΄ν”„λΌμΈ ν†µν•©